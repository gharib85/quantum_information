H=1/sqrt(2)*[1 1; 1 -1];
P=[1 0; 0 1i];
CNOT=[1 0 0 0;
    0 1 0 0;
    0 0 0 1;
    0 0 1 0];
SWAP=[1 0 0 0;
     0 0 1 0;
     0 1 0 0;
     0 0 0 1];
Z=[1 0; 0 -1];
X=[0 1; 1 0];

L=CNOT*SWAP;
R=L*kron(H,H)*kron(P,P);